#!/usr/bin/env bash
set -euo pipefail
PORT="${PORT:-3000}"
echo "⚡ Mode dev: Serveur Node + Electron"
echo "   → API: http://localhost:$PORT"

# Lancer le serveur en arrière-plan
PORT="$PORT" node server.js --dev &
SERVER_PID=$!

# Attendre que le serveur soit prêt
sleep 2

# Lancer Electron
npm start

# Nettoyer
kill $SERVER_PID 2>/dev/null || true
