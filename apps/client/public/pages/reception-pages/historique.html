<!-- HISTORIQUE - LOTS TERMINÉS -->
<section class="historique-container">
    
    <!-- En-tête -->
    <div class="historique-header">
        <h1>
            <i class="fa-solid fa-history"></i>
            Historique - Lots terminés
        </h1>
        <p class="subtitle">Consultez les lots complètement traités</p>
    </div>

    <!-- Recherche + Rafraîchir -->
    <div class="historique-filters">
        <div class="filter-group filter-group-search">
            <label for="filter-search-historique">
                <i class="fa-solid fa-magnifying-glass"></i> Recherche :
            </label>
            <input type="text" id="filter-search-historique" placeholder="Nom du lot ou n° de lot" autocomplete="off">
        </div>
        <div class="filter-group">
            <button type="button" id="btn-refresh-historique">
                <i class="fa-solid fa-sync"></i> Rafraîchir
            </button>
        </div>
    </div>

    <!-- Liste des lots terminés -->
    <div class="lots-list" id="historique-list">
        <!-- Les lots seront chargés dynamiquement -->
        <div class="loading">
            <i class="fa-solid fa-spinner"></i> Chargement de l'historique...
        </div>
    </div>

</section>

<!-- MODALE : Voir détails lot -->
<dialog class="universal-modal" id="modal-lot-details" data-modal-id="modal-lot-details">
    <div class="modal-content modal-lg">
        <div class="modal-header">
            <h2><i class="fa-solid fa-boxes-stacked"></i> Détails Lot #<span id="modal-lot-number">-</span></h2>
            <button type="button" class="modal-close-btn" data-modal-close="modal-lot-details">
                <i class="fa-solid fa-times"></i>
            </button>
        </div>
        <div class="modal-body">
            <div class="lot-details-info">
                <div class="info-grid">
                    <div class="info-item">
                        <span class="info-label">Créé le :</span>
                        <span class="info-value" id="modal-lot-created">-</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Terminé le :</span>
                        <span class="info-value" id="modal-lot-finished">-</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Total PC :</span>
                        <span class="info-value" id="modal-lot-total">-</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Reconditionnés :</span>
                        <span class="info-value" id="modal-lot-recond">-</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">HS :</span>
                        <span class="info-value" id="modal-lot-hs">-</span>
                    </div>
                </div>
            </div>

            <h3 style="margin-top: 16px; margin-bottom: 12px;">PC du lot</h3>
            <div class="lot-details-table">
                <table class="details-table">
                    <thead>
                        <tr>
                            <th style="width: 50px;">N°</th>
                            <th style="width: 140px;">S/N</th>
                            <th style="width: 100px;">Type</th>
                            <th style="width: 100px;">Marque</th>
                            <th style="width: 120px;">Modèle</th>
                            <th style="width: 100px;">État</th>
                            <th style="width: 120px;">Technicien</th>
                        </tr>
                    </thead>
                    <tbody id="modal-lot-items">
                        <!-- Items seront ajoutés dynamiquement -->
                    </tbody>
                </table>
            </div>
        </div>
        <div class="modal-footer">
            <button type="button" class="modal-cancel-btn" data-modal-close="modal-lot-details">
                <i class="fa-solid fa-times"></i> Fermer
            </button>
        </div>
    </div>
</dialog>

<!-- MODALE : Éditer items du lot -->
<dialog class="universal-modal" id="modal-edit-lot-items" data-modal-id="modal-edit-lot-items">
    <div class="modal-content modal-lg">
        <div class="modal-header">
            <h2><i class="fa-solid fa-list-check"></i> Éditer matériel - Lot #<span id="modal-edit-lot-number">-</span></h2>
            <button type="button" class="modal-close-btn" data-modal-close="modal-edit-lot-items">
                <i class="fa-solid fa-times"></i>
            </button>
        </div>
        <div class="modal-body">
            <div class="edit-items-table-wrapper">
                <table class="edit-items-table">
                    <thead>
                        <tr>
                            <th style="width: 50px;">N°</th>
                            <th style="width: 140px;">S/N</th>
                            <th style="width: 100px;">Type</th>
                            <th style="width: 100px;">Marque</th>
                            <th style="width: 120px;">Modèle</th>
                            <th style="width: 120px;">État</th>
                            <th style="width: 140px;">Technicien</th>
                        </tr>
                    </thead>
                    <tbody id="modal-edit-items-body">
                        <!-- Items seront ajoutés dynamiquement -->
                    </tbody>
                </table>
            </div>
        </div>
        <div class="modal-footer">
            <button type="button" class="modal-cancel-btn" data-modal-close="modal-edit-lot-items">
                <i class="fa-solid fa-times"></i> Annuler
            </button>
            <button type="button" id="btn-apply-item-edits" class="modal-apply-btn">
                <i class="fa-solid fa-check"></i> Appliquer
            </button>
        </div>
    </div>
</dialog>

<!-- MODALE : Éditer nom du lot -->
<dialog class="universal-modal" id="modal-edit-lot-name" data-modal-id="modal-edit-lot-name">
    <div class="modal-content modal-md">
        <div class="modal-header">
            <h2><i class="fa-solid fa-edit"></i> Éditer le nom du lot</h2>
            <button type="button" class="modal-close-btn" data-modal-close="modal-edit-lot-name">
                <i class="fa-solid fa-times"></i>
            </button>
        </div>
        <div class="modal-body">
            <div class="form-group">
                <label for="input-lot-name">Nom du lot :</label>
                <input type="text" id="input-lot-name" placeholder="Entrez le nouveau nom du lot" autofocus>
            </div>
        </div>
        <div class="modal-footer">
            <button type="button" class="modal-cancel-btn" data-modal-close="modal-edit-lot-name">
                <i class="fa-solid fa-times"></i> Annuler
            </button>
            <button type="button" id="btn-save-lot-name" class="modal-apply-btn">
                <i class="fa-solid fa-check"></i> Enregistrer
            </button>
        </div>
    </div>
</dialog>
