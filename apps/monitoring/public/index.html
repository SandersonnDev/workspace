<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta http-equiv="Content-Security-Policy"
        content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'; font-src 'self'; img-src 'self' data: https:; connect-src 'self' http://localhost:8060 ws://localhost:8060;">
    <title>Workspace Server - Dashboard</title>

    <!-- FontAwesome Icons (Local) -->
    <link rel="stylesheet" href="lib/fontawesome/all.min.css">

    <!-- Styles -->
    <link rel="stylesheet" href="assets/css/global.css">
</head>

<body>
    <div class="section">
        <!-- Header de la section -->
        <div class="section-title">
            <div>
                <h1><i class="fas fa-server"></i> Workspace Monitoring</h1>
            </div>
        </div>

        <!-- Navigation -->
        <div class="section-nav">
            <button class="nav-button nav-button-active" data-page="monitoring">
                <i class="fas fa-chart-line"></i> Monitoring
            </button>
            <!-- <button class="nav-button" data-page="logs">
                <i class="fas fa-file-lines"></i> Logs
            </button>
            <button class="nav-button" data-page="requests">
                <i class="fas fa-network-wired"></i> Requêtes
            </button>
            <button class="nav-button" data-page="chat-connections">
                <i class="fas fa-comments"></i> Chat & Connexions
            </button>
            <button class="nav-button" data-page="stats">
                <i class="fas fa-bar-chart"></i> Statistiques
            </button> -->
        </div>

        <!-- Contenu principal -->
        <div class="section-contain">
            <!-- PAGE: Monitoring (par défaut) -->
            <div id="page-monitoring" class="page page-active">
                <!-- Quick stats row -->
                <div class="quick-stats">
                    <div class="stat-card">
                        <div class="stat-icon"><i class="fas fa-clock"></i></div>
                        <div class="stat-content">
                            <div class="label">Uptime</div>
                            <div class="value" id="server-uptime">0s</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon"><i class="fas fa-users"></i></div>
                        <div class="stat-content">
                            <div class="label">Clients</div>
                            <div class="value" id="client-count">0</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon"><i class="fas fa-microchip"></i></div>
                        <div class="stat-content">
                            <div class="label">CPU</div>
                            <div class="value" id="system-cpu">--</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon"><i class="fas fa-memory"></i></div>
                        <div class="stat-content">
                            <div class="label">Mémoire</div>
                            <div class="value" id="system-memory">--</div>
                        </div>
                    </div>
                </div>

                <div class="grid">
                    <!-- Bloc: Console serveur de jeux -->
                    <div class="grid-item">
                        <div class="block game-server-block">
                            <div class="block-title">
                                <h3>Console serveur</h3>
                                <div class="section-status">
                                    <span id="server-status" class="status-pill status-offline">
                                        <span class="status-dot"></span>
                                        Hors ligne
                                    </span>
                                     <button class="game-btn game-btn-start"
                                        data-game-action="start">Start</button>
                                    <button class="game-btn game-btn-stop" data-game-action="stop"
                                        disabled>Stop</button>
                                    <button class="game-btn game-btn-kill"
                                        data-game-action="kill">Kill/Restart</button>
                                </div>
                            </div>
                            <div class="block-content">
                                <div class="game-server-controls">
                                    <div class="game-status-row">
                                    </div>
                                    <div id="game-terminal" class="game-terminal" aria-live="polite"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- PAGE: Logs -->
                <div id="page-logs" class="page">
                    <div class="block">
                        <div class="block-title">
                            <i class="fas fa-file-lines"></i> Journal des Logs
                        </div>
                        <div class="block-content">
                            <div class="action-block">
                                <button id="logs-clear">
                                    <i class="fas fa-trash"></i> Effacer
                                </button>
                            </div>
                        </div>
                        <div class="block-content">
                            <div id="logs-container">
                                <p class="empty-message">Aucun log pour le moment</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- PAGE: Chat Logs Terminal + Connexions Actives COMBINÉES -->
                <div id="page-chat-connections" class="page">
                    <div class="grid">
                        <!-- COLONNE 1: Logs du Chat -->
                        <div class="grid-item">
                            <div class="block">
                                <div class="block-title">
                                    <i class="fas fa-comments"></i> Logs du Chat
                                </div>
                                <div class="block-content">
                                    <div class="action-block">
                                        <button id="chat-logs-clear">
                                            <i class="fas fa-trash"></i> Effacer
                                        </button>
                                    </div>
                                </div>
                                <div class="block-content">
                                    <div id="chat-logs-container" class="terminal-logs">
                                        <div class="terminal-line">$ Démarrage du monitoring chat...</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- COLONNE 2: Connexions Actives -->
                        <div class="grid-item">
                            <div class="block">
                                <div class="block-title">
                                    <i class="fas fa-link"></i> Connexions Actives
                                </div>
                                <div class="block-content">
                                    <div class="block-table">
                                        <table>
                                            <thead>
                                                <tr>
                                                    <th>ID Utilisateur</th>
                                                    <th>Username</th>
                                                    <th>IP</th>
                                                    <th>Connecté depuis</th>
                                                    <th>Status</th>
                                                </tr>
                                            </thead>
                                            <tbody id="connections-body">
                                                <tr>
                                                    <td colspan="5" class="empty-message">Aucune connexion</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- PAGE: HTTP Requests Terminal -->
                <div id="page-requests" class="page">
                    <div class="block">
                        <div class="block-title">
                            <i class="fas fa-network-wired"></i> Requêtes HTTP
                        </div>
                        <div class="block-content">
                            <div class="action-block">
                                <button id="requests-clear">
                                    <i class="fas fa-trash"></i> Effacer
                                </button>
                            </div>
                        </div>
                        <div class="block-content">
                            <div id="requests-container" class="terminal-logs">
                                <div class="terminal-line">$ Démarrage du monitoring requêtes...</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- PAGE: Statistiques -->
                <div id="page-stats" class="page">
                    <div class="grid">
                        <!-- Bloc: Requêtes HTTP -->
                        <div class="grid-item">
                            <div class="block">
                                <div class="block-title">
                                    <i class="fas fa-chart-bar"></i> Requêtes HTTP
                                </div>
                                <div class="block-content">
                                    <div class="item">
                                        <span class="item-label">Total:</span>
                                        <span class="item-value" id="stats-total-requests">0</span>
                                    </div>
                                    <div class="item">
                                        <span class="item-label">Succès (200-299):</span>
                                        <span class="item-value text-success" id="stats-success">0</span>
                                    </div>
                                    <div class="item">
                                        <span class="item-label">Erreurs client (400-499):</span>
                                        <span class="item-value text-warning" id="stats-client-errors">0</span>
                                    </div>
                                    <div class="item">
                                        <span class="item-label">Erreurs serveur (500-599):</span>
                                        <span class="item-value text-error" id="stats-server-errors">0</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Bloc: Messages Chat -->
                        <div class="grid-item">
                            <div class="block">
                                <div class="block-title">
                                    <i class="fas fa-comments"></i> Messages Chat
                                </div>
                                <div class="block-content">
                                    <div class="item">
                                        <span class="item-label">Total envoyés:</span>
                                        <span class="item-value" id="stats-total-messages">0</span>
                                    </div>
                                    <div class="item">
                                        <span class="item-label">Aujourd'hui:</span>
                                        <span class="item-value" id="stats-today-messages">0</span>
                                    </div>
                                    <div class="item">
                                        <span class="item-label">Cette heure:</span>
                                        <span class="item-value" id="stats-hour-messages">0</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
        <!-- Footer -->
        <div class="section-footer">
            <p>Workspace Server v1.0 - Dashboard de monitoring</p>
        </div>

        <!-- Scripts -->
        <script src="assets/js/global.js"></script>
        <script src="assets/js/modules/TerminalLogger.js"></script>
        <script src="assets/js/modules/ServerMonitor.js"></script>
        <script src="assets/js/modules/GameServerTerminal.js"></script>
        <script src="app.js"></script>
</body>

</html>